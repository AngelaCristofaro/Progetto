<html lang="it">
<head>
<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Salva risorsa</title>
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/metisMenu/metisMenu.min.css" rel="stylesheet">
    <link href="static/dist/css/sb-admin-2.css" rel="stylesheet">
    <link href="static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <script src="static/jquery/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/metisMenu/metisMenu.min.js"></script>
    <script src="static/dist/js/sb-admin-2.js"></script>
    <script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" />
	<script>
	 $(document).ready(function(){
	var table = $('#tabellaUtenti').DataTable( {
	    ajax: {
	    	url:'http://localhost:8080/utenti',
	    	dataSrc:''
	    },
	    columns : [
	    	{data:"id"},
	    	{data:"username"},
	    	{	targets:-1,
	    		data:null,
	    		defaultContent:"<button class='glyphicon glyphicon-trash' id='cancella' onClick='window.location.reload();' ></button>"
	    	}    
	    		  ]
	 });
	
	$('#tabellaUtenti tbody').on('click','#cancella',function(){
		 var riga= tabella.row($(this).parents('tr')).data();
		 var cancella = riga.id;
		 $.get("http://localhost:8080/delete-utente?id="+cancella); 
		 
		 function refreshPage(){
	 	        window.location.reload();
	 	    } 
	 });
	 });
	</script>
</head>
<body>
 <div>
 	<h1 style="text-align:center;">Tutti gli utenti</h1>
 	</br>
 </div>
	<div>
    	<table id="tabellaUtenti" class="display">
			<thead>
				<tr>
					<th>Id</th>
					<th>Username</th>
					<th></th>
				</tr>
			</thead>
		</table>
 	</div>
</body>
</html>